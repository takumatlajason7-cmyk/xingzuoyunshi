if (autoHide) {
                    const hideTime = type === 'error' ? 10000 : (type === 'success' ? 8000 : 5000);
                    setTimeout(() => hideStatus(), hideTime);
                }
            }
        }

        function hideStatus() {
            const statusEl = safeGetElement('statusMessage');
            if (statusEl) {
                statusEl.classList.add('hidden');
            }
        }

        function setLoading(loading) {
            isLoading = loading;
            const buttons = document.querySelectorAll('.btn');
            buttons.forEach(btn => {
                if (loading) {
                    btn.disabled = true;
                    if (btn.id === 'fetchBtn') {
                        btn.innerHTML = '<span class="loading-spinner"></span>è·å–ä¸­...';
                    } else if (btn.id === 'demoBtn') {
                        btn.innerHTML = '<span class="loading-spinner"></span>ç”Ÿæˆä¸­...';
                    } else if (btn.id === 'testApiBtn') {
                        btn.innerHTML = '<span class="loading-spinner"></span>æµ‹è¯•ä¸­...';
                    }
                } else {
                    btn.disabled = false;
                    if (btn.id === 'fetchBtn') {
                        btn.innerHTML = 'ğŸŒŸ è·å–ä¸“ä¸šè¿åŠ¿';
                    } else if (btn.id === 'demoBtn') {
                        btn.innerHTML = 'ğŸ­ æ¼”ç¤ºä½“éªŒ';
                    } else if (btn.id === 'testApiBtn') {
                        btn.innerHTML = 'ğŸ”§ æµ‹è¯•APIè¿æ¥';
                    }
                }
            });
        }

        function getTypeDisplayName() {
            const consType = safeGetElement('consType')?.value || 'today';
            const typeMap = {
                'today': 'ä»Šæ—¥',
                'tomorrow': 'æ˜æ—¥', 
                'week': 'æœ¬å‘¨',
                'month': 'æœ¬æœˆ'
            };
            return typeMap[consType] || 'ä»Šæ—¥';
        }

        // æ¸…é™¤ç»“æœ
        function clearResults() {
            const resultsEl = safeGetElement('horoscopeResults');
            if (resultsEl) {
                resultsEl.classList.add('hidden');
                resultsEl.innerHTML = '';
            }
            currentData = null;
            showStatus('âœ… æ•°æ®å·²æˆåŠŸæ¸…é™¤ï¼æ‚¨å¯ä»¥é‡æ–°é…ç½®å¹¶è·å–æ–°çš„è¿åŠ¿æ•°æ®ã€‚', 'success');
        }

        // åˆ›å»ºæ˜Ÿåº§è¿åŠ¿å¡ç‰‡
        function createHoroscopeCard(data, isDemo = false) {
            const constellation = constellationMap[data.name] || { name: data.name, symbol: 'ğŸŒŸ', period: '', element: '' };
            const summary = data.summary || 'è¿åŠ¿è‰¯å¥½ï¼Œä¿æŒç§¯æå‘ä¸Šçš„å¿ƒæ€ï¼Œå¥½è¿å°†ä¼šä¼´éšæ‚¨ã€‚';
            
            return `
                <div class="horoscope-card">
                    <h3 class="card-title">
                        ${constellation.symbol} ${constellation.name}
                        ${constellation.period ? `<br><small style="font-size:0.85em;opacity:0.8;font-weight:400;">${constellation.period} â€¢ ${constellation.element}æ˜Ÿåº§</small>` : ''}
                    </h3>
                    <div class="card-content">
                        <h4>ğŸ’« ${getTypeDisplayName()}è¿åŠ¿æ¦‚è¿°</h4>
                        <p style="margin-bottom: 15px; font-size: 1.05rem; line-height: 1.6;">${summary}</p>
                        
                        <h4>ğŸ’ çˆ±æƒ…è¿åŠ¿</h4>
                        <p>${data.love_txt || 'æ„Ÿæƒ…è¿åŠ¿ç¨³å®šï¼Œé€‚åˆè¡¨è¾¾å†…å¿ƒæƒ³æ³•'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.love) || 4)}</span></p>
                        
                        <h4>ğŸ’¼ å·¥ä½œè¿åŠ¿</h4>
                        <p>${data.work_txt || 'å·¥ä½œçŠ¶æ€è‰¯å¥½ï¼Œæ•ˆç‡è¾ƒé«˜'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.work) || 4)}</span></p>
                        
                        <h4>ğŸ’° è´¢è¿åˆ†æ</h4>
                        <p>${data.money_txt || 'è´¢è¿å¹³ç¨³ï¼Œç†è´¢éœ€è°¨æ…'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.money) || 4)}</span></p>
                        
                        <h4>ğŸ¥ å¥åº·æŒ‡æ•°</h4>
                        <p>${data.health_txt || 'èº«ä½“çŠ¶å†µè‰¯å¥½ï¼Œæ³¨æ„åŠ³é€¸ç»“åˆ'} <span class="star-rating">${'â˜…'.repeat(parseInt(data.health) || 4)}</span></p>
                        
                        <div class="lucky-info">
                            <h4>ğŸ€ ä¸“å±å¹¸è¿å…ƒç´ </h4>
                            <p style="margin: 8px 0;"><strong>å¹¸è¿é¢œè‰²:</strong> <span class="color-preview" style="background-color: ${data.color || '#90EE90'};"></span>${data.color || 'ç¿ ç»¿è‰²'}</p>
                            <p style="margin: 8px 0;"><strong>å¹¸è¿æ•°å­—:</strong> <span style="font-size: 1.2em; color: #FFD700; font-weight: bold;">${data.number || '8'}</span></p>
                            <p style="margin: 8px 0;"><strong>æœ€ä½³é…å¯¹:</strong> <strong style="color: #ADFF2F;">${constellationMap[data.QFriend]?.name || data.QFriend || 'å¤©ç§¤åº§'}</strong></p>
                        </div>
                        
                        ${isDemo ? '<div style="text-align:center;margin-top:20px;padding:10px;background:rgba(255,215,0,0.1);border-radius:10px;border:1px solid rgba(255,215,0,0.3);"><small style="color:#FFD700;font-weight:500;">ğŸ­ æ¼”ç¤ºæ•°æ®å±•ç¤º</small></div>' : ''}
                    </div>
                </div>
            `;
        }

        // æ˜¾ç¤ºè¿åŠ¿ç»“æœ
        function displayResults(data, isDemo = false) {
            const resultsEl = safeGetElement('horoscopeResults');
            if (!resultsEl) return;
            
            if (Array.isArray(data)) {
                resultsEl.innerHTML = data.map(item => createHoroscopeCard(item, isDemo)).join('');
            } else {
                resultsEl.innerHTML = createHoroscopeCard(data, isDemo);
            }
            
            resultsEl.classList.remove('hidden');
            
            // å¹³æ»‘æ»šåŠ¨åˆ°ç»“æœåŒºåŸŸ
            setTimeout(() => {
                resultsEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 500);
        }

        // æ¼”ç¤ºæ¨¡å¼æ•°æ®ç”Ÿæˆ - é«˜è´¨é‡ç‰ˆæœ¬
        function generateDemoData() {
            const demoTexts = {
                summary: [
                    'ä»Šæ—¥å®‡å®™èƒ½é‡åœºå¯¹æ‚¨æ ¼å¤–æœ‰åˆ©ï¼Œæ˜¯å®ç°ç›®æ ‡çš„ç»ä½³æ—¶æœºï¼ŒæŠŠæ¡æœºä¼šä¸»åŠ¨å‡ºå‡»ã€‚',
                    'æ˜Ÿè±¡æ˜¾ç¤ºæ‚¨ä»Šå¤©çš„ç›´è§‰ç‰¹åˆ«æ•é”ï¼Œç›¸ä¿¡å†…å¿ƒçš„å£°éŸ³ä¼šä¸ºæ‚¨æŒ‡å¼•æ­£ç¡®æ–¹å‘ã€‚',
                    'ä»Šæ—¥è¿åŠ¿å‘ˆç°ä¸Šå‡è¶‹åŠ¿ï¼Œé€‚åˆåšå‡ºé‡è¦å†³ç­–ï¼Œå‹‡æ•¢è¿ˆå‡ºå…³é”®ä¸€æ­¥ã€‚',
                    'ä»Šå¤©æ‚¨çš„ä¸ªäººé­…åŠ›å€¼è¾¾åˆ°å·…å³°ï¼Œäººé™…å…³ç³»å’Œè°ï¼Œå®¹æ˜“è·å¾—ä»–äººæ”¯æŒã€‚',
                    'å®‡å®™èµ‹äºˆæ‚¨å¼ºå¤§çš„è¡ŒåŠ¨åŠ›ï¼Œä»Šæ—¥é€‚åˆå†’é™©å’Œå°è¯•å…¨æ–°çš„æŒ‘æˆ˜é¡¹ç›®ã€‚',
                    'ä»Šå¤©æ˜¯æ‚¨çš„å¹¸è¿æ—¥ï¼Œä¿æŒä¹è§‚ç§¯æçš„å¿ƒæ€ï¼Œæ„å¤–çš„å¥½æ¶ˆæ¯å³å°†åˆ°æ¥ã€‚',
                    'æ˜Ÿåº§èƒ½é‡æé†’æ‚¨å…³æ³¨å†…å¿ƒå¹³è¡¡ï¼Œä»Šæ—¥é€‚åˆæ·±åº¦æ€è€ƒå’Œåˆ¶å®šé•¿è¿œè§„åˆ’ã€‚',
                    'ä»Šæ—¥æ²Ÿé€šè¿åŠ¿æä½³ï¼Œè¡¨è¾¾èƒ½åŠ›å‡ºè‰²ï¼Œæ˜¯è°ˆåˆ¤åå•†çš„æœ€ä½³æ—¶æœºã€‚'
                ],
                love: [
                    'æ¡ƒèŠ±è¿åŠ¿æ—ºç››ï¼Œå•èº«è€…æ˜“é‡å¿ƒä»ªå¯¹è±¡',
                    'æ‹æƒ…ç”œèœœæ¸©é¦¨ï¼Œé€‚åˆæ·±åº¦äº¤æµ',
                    'éœ€è¦æ›´å¤šè€å¿ƒç†è§£ï¼Œé¿å…äº‰æ‰§',
                    'æ„Ÿæƒ…è¿åŠ¿ç¨³æ­¥ä¸Šå‡ï¼Œå…³ç³»æ›´è¿›ä¸€æ­¥',
                    'æœ‰æœ›é‡åˆ°å‘½ä¸­æ³¨å®šçš„çœŸçˆ±',
                    'é€‚åˆè¡¨ç™½æˆ–æ±‚å©šçš„å‰æ—¥',
                    'æ„Ÿæƒ…éœ€è¦ç©ºé—´ï¼Œç»™å½¼æ­¤æ€è€ƒæ—¶é—´',
                    'æ—§æƒ…å¤ç‡ƒçš„å¯èƒ½æ€§è¾ƒé«˜'
                ],
                work: [
                    'å·¥ä½œæ•ˆç‡æé«˜ï¼Œåˆ›é€ åŠ›çˆ†å‘',
                    'å®¹æ˜“è·å¾—ä¸Šçº§è®¤å¯å’Œèµè¯†',
                    'å›¢é˜Ÿåˆä½œè¿åŠ¿ä½³ï¼Œåä½œé¡ºåˆ©',
                    'æœ‰å‡èŒåŠ è–ªçš„è‰¯å¥½æœºä¼š',
                    'åˆ›æ„çµæ„Ÿæºæºä¸æ–­ï¼Œé€‚åˆåˆ›æ–°',
                    'ä¸šç»©è¡¨ç°çªå‡ºï¼Œæˆæœæ˜¾è‘—',
                    'é€‚åˆå­¦ä¹ æ–°æŠ€èƒ½ï¼Œè‡ªæˆ‘æå‡',
                    'èŒåœºè´µäººç›¸åŠ©ï¼Œå‘å±•é¡ºé‚'
                ],
                money: [
                    'æ­£è´¢è¿äº¨é€šï¼Œæ”¶å…¥ç¨³å®šå¢é•¿',
                    'æŠ•èµ„éœ€è¦è°¨æ…ï¼Œé¿å…ç›²ç›®è·Ÿé£',
                    'æœ‰æ„å¤–ä¹‹è´¢ï¼Œå°é¢æ”¶ç›Šä¸æ–­',
                    'ç†è´¢è§„åˆ’è¿åŠ¿ä½³ï¼Œé€‚åˆé•¿çº¿æŠ•èµ„',
                    'æ¶ˆè´¹æ¬²æœ›å¼ºçƒˆï¼Œéœ€è¦ç†æ€§æ§åˆ¶',
                    'åè´¢è¿ä¸é”™ï¼Œå¯é€‚é‡æŠ•èµ„',
                    'é‡‘é’±ç®¡ç†èƒ½åŠ›æå‡ï¼Œè´¢å¯Œç§¯ç´¯',
                    'é€‚åˆæ¸…ç†å€ºåŠ¡ï¼Œæ•´é¡¿è´¢åŠ¡'
                ],
                health: [
                    'ç²¾ç¥çŠ¶æ€é¥±æ»¡ï¼Œæ´»åŠ›å……æ²›',
                    'éœ€è¦æ³¨æ„å……è¶³ä¼‘æ¯ï¼Œé¿å…ç–²åŠ³',
                    'é€‚åˆè¿›è¡Œæˆ·å¤–è¿åŠ¨ï¼Œå¢å¼ºä½“è´¨',
                    'å¿ƒæƒ…æ„‰æ‚¦ï¼Œèº«å¿ƒå¥åº·å¹³è¡¡',
                    'é¥®é£Ÿè¥å…»éœ€è¦å‡è¡¡æ­é…',
                    'èº«ä½“æœºèƒ½è‰¯å¥½ï¼ŒæŠµæŠ—åŠ›å¼º',
                    'é€‚åˆä½“æ£€ï¼Œå…³æ³¨å¥åº·æŒ‡æ ‡',
                    'æ”¾æ¾å¿ƒæƒ…ï¼Œå‡è½»å·¥ä½œå‹åŠ›'
                ]
            };

            const colors = [
                '#FF6B6B', '#4ECDC4', '#45B7D1', '#96CEB4', '#FFEAA7', 
                '#DDA0DD', '#98D8C8', '#F7DC6F', '#FF9FF3', '#54A0FF',
                '#5F27CD', '#00D2D3', '#FF9F43', '#10AC84', '#EE5A24'
            ];
            
            const numbers = [1, 3, 6, 7, 8, 9, 11, 13, 16, 18, 21, 26, 28, 33, 35, 42];

            return Object.keys(constellationMap).map(key => {
                const randomColor = colors[Math.floor(Math.random() * colors.length)];
                const randomNumber = numbers[Math.floor(Math.random() * numbers.length)];
                const randomFriend = Object.keys(constellationMap)[Math.floor(Math.random() * 12)];
                
                return {
                    name: key,
                    summary: demoTexts.summary[Math.floor(Math.random() * demoTexts.summary.length)],
                    love: Math.floor(Math.random() * 3) + 3, // 3-5æ˜Ÿ
                    love_txt: demoTexts.love[Math.floor(Math.random() * demoTexts.love.length)],
                    work: Math.floor(Math.random() * 3) + 3,
                    work_txt: demoTexts.work[Math.floor(Math.random() * demoTexts.work.length)],
                    money: Math.floor(Math.random() * 3) + 3,
                    money_txt: demoTexts.money[Math.floor(Math.random() * demoTexts.money.length)],
                    health: Math.floor(Math.random() * 3) + 3,
                    health_txt: demoTexts.health[Math.floor(Math.random() * demoTexts.health.length)],
                    color: randomColor,
                    number: randomNumber,
                    QFriend: randomFriend
                };
            });
        }

        // æ¼”ç¤ºæ¨¡å¼ - å¢å¼ºç‰ˆ
        function runDemoMode() {
            if (isLoading) {
                showStatus('âš ï¸ ç³»ç»Ÿæ­£å¿™ï¼Œè¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆåå†è¯•', 'info');
                return;
            }

            setLoading(true);
            showStatus('ğŸ­ å¯åŠ¨æ¼”ç¤ºä½“éªŒæ¨¡å¼ï¼Œæ­£åœ¨ç”Ÿæˆç²¾ç¾çš„æ˜Ÿåº§è¿åŠ¿å±•ç¤º...', 'loading');

            setTimeout(() => {
                const targetConstellation = safeGetElement('targetConstellation')?.value;
                const demoData = generateDemoData();
                
                if (targetConstellation) {
                    const singleData = demoData.find(item => item.name === targetConstellation);
                    if (singleData) {
                        displayResults(singleData, true);
                        showStatus(`âœ… æ¼”ç¤ºä½“éªŒï¼š${constellationMap[targetConstellation].name}ç²¾ç¾è¿åŠ¿å·²å®Œæˆç”Ÿæˆï¼

ğŸ­ åŠŸèƒ½å±•ç¤ºè¯´æ˜ï¼š
â€¢ è¿™æ˜¯é«˜è´¨é‡çš„æ¼”ç¤ºæ•°æ®ï¼Œå®Œæ•´å±•ç°åº”ç”¨åŠŸèƒ½ç‰¹æ€§
â€¢ åŒ…å«å››ç»´ä¸“ä¸šè¯„åˆ†ç³»ç»Ÿå’Œå…¨æ–¹ä½å¹¸è¿å…ƒç´ åˆ†æ
â€¢ ç•Œé¢è®¾è®¡ã€åŠ¨ç”»æ•ˆæœã€äº¤äº’ä½“éªŒå®Œå…¨çœŸå®å‘ˆç°

ğŸ’¡ è·å–çœŸå®æ•°æ®ï¼š
â€¢ é…ç½®èšåˆæ•°æ®APIå¯†é’¥åç‚¹å‡»"è·å–ä¸“ä¸šè¿åŠ¿"
â€¢ å³å¯äº«å—åŸºäºçœŸå®å æ˜Ÿç®—æ³•çš„ç²¾å‡†åˆ†ææœåŠ¡

ğŸŒŸ æ¼”ç¤ºæ•°æ®ä»…ä¾›åŠŸèƒ½å±•ç¤ºï¼Œä¸å…·å¤‡å®é™…æŒ‡å¯¼æ„ä¹‰`, 'success');
                    }
                } else {
                    displayResults(demoData, true);
                    showStatus(`âœ… æ¼”ç¤ºä½“éªŒï¼šåäºŒæ˜Ÿåº§å®Œæ•´è¿åŠ¿å±•ç¤ºå·²ç”Ÿæˆï¼

ğŸ­ å®Œæ•´åŠŸèƒ½æ¼”ç¤ºï¼š
â€¢ 12æ˜Ÿåº§ä¸“ä¸šè¿åŠ¿å¡ç‰‡ï¼Œè®¾è®¡ç²¾ç¾ï¼Œæ•°æ®ä¸°å¯Œ
â€¢ å››ç»´è¯„åˆ†ç³»ç»Ÿï¼šçˆ±æƒ…ã€å·¥ä½œã€è´¢è¿ã€å¥åº·å…¨è¦†ç›–
â€¢ å¹¸è¿å…ƒç´ å®Œæ•´ï¼šä¸“å±é¢œè‰²ã€å¹¸è¿æ•°å­—ã€æœ€ä½³é…å¯¹
â€¢ å“åº”å¼ç•Œé¢è®¾è®¡ï¼Œå®Œç¾é€‚é…å„ç§è®¾å¤‡å±å¹•

ğŸ”§ ä½“éªŒå»ºè®®ï¼š
â€¢ å°è¯•é€‰æ‹©å•ä¸ªæ˜Ÿåº§é‡æ–°ç”Ÿæˆæ¼”ç¤ºæ•°æ®
â€¢ åˆ‡æ¢ä¸åŒè¿åŠ¿ç±»å‹æŸ¥çœ‹ç•Œé¢å˜åŒ–æ•ˆæœ
â€¢ æµ‹è¯•"æ¸…é™¤æ•°æ®"åŠŸèƒ½çš„æµç•…æ“ä½œä½“éªŒ
â€¢ è°ƒæ•´æµè§ˆå™¨çª—å£éªŒè¯å“åº”å¼è®¾è®¡æ•ˆæœ

ğŸ’ é…ç½®çœŸå®APIåå³å¯è·å–ä¸“ä¸šå æ˜Ÿå¸ˆçº§åˆ«çš„ç²¾å‡†è¿åŠ¿åˆ†æï¼`, 'success');
                }
                
                setLoading(false);
            }, 2500);
        }

        // è·å–æ˜Ÿåº§è¿åŠ¿æ•°æ® - çœŸå®APIè°ƒç”¨
        async function fetchHoroscopeData() {
            if (isLoading) {
                showStatus('âš ï¸ ç³»ç»Ÿæ­£å¿™ï¼Œè¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆ', 'info');
                return;
            }

            const apiKey = safeGetElement('apiKey')?.value.trim();
            const consType = safeGetElement('consType')?.value || 'today';
            const targetConstellation = safeGetElement('targetConstellation')?.value;

            if (!apiKey) {
                showStatus(`âŒ è¯·å…ˆé…ç½®APIå¯†é’¥ä»¥è·å–çœŸå®è¿åŠ¿æ•°æ®ï¼

ğŸ”‘ å¿«é€Ÿé…ç½®æŒ‡å—ï¼š
1. è®¿é—®èšåˆæ•°æ®å®˜ç½‘ï¼šhttps://www.juhe.cn
2. æ³¨å†Œè´¦å·å¹¶å®Œæˆå®åè®¤è¯ï¼ˆå…è´¹å¿«é€Ÿï¼‰
3. æœç´¢å¹¶ç”³è¯·"æ˜Ÿåº§è¿åŠ¿"APIæ¥å£æœåŠ¡
4. è·å–ä¸“å±APIå¯†é’¥å¹¶å¤åˆ¶åˆ°ä¸Šæ–¹è¾“å…¥æ¡†
5. ç‚¹å‡»"æµ‹è¯•APIè¿æ¥"éªŒè¯é…ç½®æ˜¯å¦æ­£ç¡®

ğŸ’¡ æ¸©é¦¨æç¤ºï¼š
â€¢ èšåˆæ•°æ®ä¸ºå›½å†…çŸ¥åAPIæœåŠ¡å•†ï¼Œå®‰å…¨å¯é 
â€¢ æ˜Ÿåº§è¿åŠ¿APIæä¾›å…è´¹è°ƒç”¨é¢åº¦
â€¢ é…ç½®å®Œæˆåå³å¯äº«å—ä¸“ä¸šçº§è¿åŠ¿åˆ†ææœåŠ¡

ğŸ­ ä¸´æ—¶ä½“éªŒæ–¹æ¡ˆï¼šç‚¹å‡»"æ¼”ç¤ºä½“éªŒ"æŸ¥çœ‹å®Œæ•´ç•Œé¢æ•ˆæœ`, 'error', false);
                return;
            }

            setLoading(true);
            showStatus('ğŸš€ æ­£åœ¨è¿æ¥èšåˆæ•°æ®APIï¼Œè·å–æœ€æ–°ä¸“ä¸šè¿åŠ¿æ•°æ®...', 'loading');

            try {
                if (targetConstellation) {
                    const url = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=${targetConstellation}&type=${consType}`;
                    showStatus(`ğŸ” æ­£åœ¨ä¸ºæ‚¨è·å–${constellationMap[targetConstellation].name}çš„${getTypeDisplayName()}ä¸“ä¸šè¿åŠ¿åˆ†æ...`, 'loading');
                    
                    const response = await fetch(url);
                    const result = await response.json();
                    
                    if (result.error_code === 0) {
                        currentData = result.result;
                        displayResults(currentData);
                        showStatus(`âœ… æˆåŠŸè·å–${constellationMap[targetConstellation].name}çœŸå®è¿åŠ¿æ•°æ®ï¼

ğŸ“Š æ•°æ®è´¨é‡æŠ¥å‘Šï¼š
â€¢ æ•°æ®æ¥æºï¼šèšåˆæ•°æ®å®˜æ–¹APIï¼Œæƒå¨å¯ä¿¡
â€¢ è¿åŠ¿ç±»å‹ï¼š${getTypeDisplayName()}è¿åŠ¿ï¼Œå®æ—¶æ›´æ–°
â€¢ åˆ†æç»´åº¦ï¼šå››ç»´ä¸“ä¸šè¯„åˆ† + å®Œæ•´å¹¸è¿å…ƒç´ 
â€¢ è·å–æ—¶é—´ï¼š${new Date().toLocaleString()}

ğŸŒŸ æ•°æ®å·²å®Œæ•´å±•ç¤ºï¼ŒåŒ…å«ä¸“ä¸šå æ˜Ÿå¸ˆçº§åˆ«çš„è¯¦ç»†åˆ†æï¼`, 'success');
                    } else {
                        throw new Error(`APIæœåŠ¡è¿”å›é”™è¯¯ï¼š${result.reason} (é”™è¯¯ç : ${result.error_code})`);
                    }
                } else {
                    // æ‰¹é‡è·å–æ‰€æœ‰æ˜Ÿåº§
                    const constellations = Object.keys(constellationMap);
                    const results = [];
                    let completed = 0;
                    let errors = 0;
                    
                    showStatus(`ğŸŒŸ å¼€å§‹æ‰¹é‡è·å–åäºŒæ˜Ÿåº§${getTypeDisplayName()}è¿åŠ¿ï¼Œè¯·è€å¿ƒç­‰å¾…...`, 'loading');
                    
                    for (const constellation of constellations) {
                        try {
                            const url = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=${constellation}&type=${consType}`;
                            const response = await fetch(url);
                            const result = await response.json();
                            
                            completed++;
                            showStatus(`ğŸ”„ è·å–è¿›åº¦ï¼š${completed}/${constellations.length} - æ­£åœ¨åˆ†æ${constellationMap[constellation].name}è¿åŠ¿æ•°æ®`, 'loading');
                            
                            if (result.error_code === 0) {
                                results.push(result.result);
                            } else {
                                errors++;
                                console.warn(`${constellation} æ•°æ®è·å–å¼‚å¸¸:`, result.reason);
                            }
                            
                            // æ§åˆ¶è¯·æ±‚é¢‘ç‡ï¼Œé¿å…è§¦å‘é™åˆ¶
                            if (completed < constellations.length) {
                                await new Promise(resolve => setTimeout(resolve, 400));
                            }
                            
                        } catch (error) {
                            errors++;
                            console.error(`${constellation} ç½‘ç»œè¯·æ±‚å¤±è´¥:`, error);
                        }
                    }
                    
                    if (results.length > 0) {
                        currentData = results;
                        displayResults(currentData);
                        showStatus(`âœ… åäºŒæ˜Ÿåº§è¿åŠ¿æ‰¹é‡è·å–å®Œæˆï¼æ•°æ®è´¨é‡ä¼˜ç§€

ğŸ“Š è·å–ç»Ÿè®¡è¯¦æƒ…ï¼š
â€¢ æˆåŠŸè·å–ï¼š${results.length} ä¸ªæ˜Ÿåº§ âœ“
â€¢ è·å–å¤±è´¥ï¼š${errors} ä¸ªæ˜Ÿåº§ ${errors > 0 ? 'âš ï¸' : ''}
â€¢ æˆåŠŸç‡ï¼š${Math.round((results.length / constellations.length) * 100)}%
â€¢ æ•°æ®å®Œæ•´æ€§ï¼šä¼˜ç§€

ğŸ“… è¿åŠ¿ä¿¡æ¯ï¼š
â€¢ ç±»å‹ï¼š${getTypeDisplayName()}è¿åŠ¿ä¸“ä¸šåˆ†æ
â€¢ æ›´æ–°æ—¶é—´ï¼š${new Date().toLocaleString()}
â€¢ æ•°æ®æ¥æºï¼šèšåˆæ•°æ®å®˜æ–¹API
â€¢ åˆ†æè´¨é‡ï¼šä¸“ä¸šå æ˜Ÿå¸ˆçº§åˆ«

ğŸŒŸ æ‰€æœ‰æ•°æ®å·²å®Œæ•´å‘ˆç°ï¼Œç¥æ‚¨å¥½è¿ï¼`, 'success');
                    } else {
                        throw new Error('æœªèƒ½è·å–åˆ°ä»»ä½•æœ‰æ•ˆçš„è¿åŠ¿æ•°æ®ï¼Œè¯·æ£€æŸ¥ç½‘ç»œè¿æ¥æˆ–APIé…ç½®');
                    }
                }
                
            } catch (error) {
                console.error('APIè°ƒç”¨å¼‚å¸¸:', error);
                showStatus(`âŒ çœŸå®è¿åŠ¿æ•°æ®è·å–å¤±è´¥

ğŸ” é”™è¯¯è¯¦ç»†ä¿¡æ¯ï¼š${error.message}

ğŸ’¡ é—®é¢˜æ’æŸ¥æŒ‡å—ï¼š
â€¢ ç¡®è®¤APIå¯†é’¥æ˜¯å¦æ­£ç¡®ä¸”æœ‰æ•ˆ
â€¢ æ£€æŸ¥èšåˆæ•°æ®è´¦æˆ·ä½™é¢æ˜¯å¦å……è¶³
â€¢ éªŒè¯ç½‘ç»œè¿æ¥çŠ¶æ€æ˜¯å¦ç¨³å®šæ­£å¸¸
â€¢ å°è¯•åˆ‡æ¢ä¸åŒçš„è¿åŠ¿æŸ¥è¯¢ç±»å‹
â€¢ æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·çš„ç½‘ç»œé¢æ¿

ğŸ› ï¸ è§£å†³æ–¹æ¡ˆå»ºè®®ï¼š
â€¢ é‡æ–°å¤åˆ¶ç²˜è´´APIå¯†é’¥ï¼Œç¡®ä¿æ— å¤šä½™å­—ç¬¦
â€¢ è”ç³»èšåˆæ•°æ®æŠ€æœ¯æ”¯æŒè·å–å¸®åŠ©
â€¢ ç¨åé‡è¯•ï¼Œå¯èƒ½æ˜¯ä¸´æ—¶ç½‘ç»œé—®é¢˜
â€¢ å…ˆä½¿ç”¨"æ¼”ç¤ºä½“éªŒ"åŠŸèƒ½æŸ¥çœ‹ç•Œé¢æ•ˆæœ

ğŸŒ æŠ€æœ¯æç¤ºï¼šéƒ¨ç½²åˆ°HTTPSç¯å¢ƒå¯èƒ½è§£å†³è·¨åŸŸè®¿é—®é—®é¢˜`, 'error', false);
            } finally {
                setLoading(false);
            }
        }

        // æµ‹è¯•APIè¿æ¥ - å¢å¼ºç‰ˆ
        async function testApiConnection() {
            if (isLoading) {
                showStatus('âš ï¸ ç³»ç»Ÿæ­£å¿™ï¼Œè¯·ç­‰å¾…å½“å‰æ“ä½œå®Œæˆ', 'info');
                return;
            }

            const apiKey = safeGetElement('apiKey')?.value.trim();

            if (!apiKey) {
                showStatus(`âŒ è¯·å…ˆè¾“å…¥APIå¯†é’¥è¿›è¡Œè¿æ¥æµ‹è¯•ï¼

ğŸ”‘ APIå¯†é’¥è·å–è¯¦ç»†æµç¨‹ï¼š
1. æ‰“å¼€æµè§ˆå™¨è®¿é—®ï¼šhttps://www.juhe.cn
2. ç‚¹å‡»å³ä¸Šè§’"æ³¨å†Œ"åˆ›å»ºå…è´¹è´¦å·
3. å®Œæˆæ‰‹æœºå·éªŒè¯å’Œå®åè®¤è¯ï¼ˆå¿…éœ€ï¼‰
4. ç™»å½•åæœç´¢"æ˜Ÿåº§è¿åŠ¿"APIæœåŠ¡
5. ç‚¹å‡»"ç«‹å³ç”³è¯·"è·å–æ¥å£æƒé™
6. åœ¨"æˆ‘çš„API"é¡µé¢å¤åˆ¶ä¸“å±å¯†é’¥
7. å°†å¯†é’¥ç²˜è´´åˆ°ä¸Šæ–¹é…ç½®æ¡†ä¸­

ğŸ’ æœåŠ¡ä¼˜åŠ¿ï¼š
â€¢ èšåˆæ•°æ®æ˜¯å›½å†…é¢†å…ˆçš„APIæœåŠ¡æä¾›å•†
â€¢ æ˜Ÿåº§è¿åŠ¿APIæ•°æ®å‡†ç¡®ï¼Œæ›´æ–°åŠæ—¶
â€¢ æä¾›å…è´¹è°ƒç”¨é¢åº¦ï¼Œé€‚åˆä¸ªäººä½¿ç”¨
â€¢ æŠ€æœ¯æ”¯æŒå®Œå–„ï¼Œæ–‡æ¡£è¯¦ç»†æ˜“æ‡‚

ğŸ­ æ— å¯†é’¥ä½“éªŒï¼šç‚¹å‡»"æ¼”ç¤ºä½“éªŒ"æŸ¥çœ‹å®Œæ•´åŠŸèƒ½`, 'error', false);
                return;
            }

            setLoading(true);
            showStatus('ğŸ”§ æ­£åœ¨æ‰§è¡ŒAPIè¿æ¥æµ‹è¯•ï¼ŒéªŒè¯é…ç½®æœ‰æ•ˆæ€§...', 'loading');

            try {
                const testUrl = `https://apis.juhe.cn/fapig/constellation/getAll?key=${apiKey}&consName=aries&type=today`;
                showStatus('ğŸ” å‘èšåˆæ•°æ®æœåŠ¡å™¨å‘é€æµ‹è¯•è¯·æ±‚ï¼Œæ£€æµ‹è¿é€šæ€§...', 'loading');
                
                const response = await fetch(testUrl);
                const result = await response.json();
                
                if (result.error_code === 0) {
                    showStatus(`âœ… APIè¿æ¥æµ‹è¯•å®Œå…¨æˆåŠŸï¼ç³»ç»Ÿé…ç½®å®Œç¾

ğŸ¯ æµ‹è¯•ç»“æœè¯¦ç»†æŠ¥å‘Šï¼š
â€¢ APIå¯†é’¥çŠ¶æ€ï¼šâœ“ æœ‰æ•ˆä¸”æ­£å¸¸å¯ç”¨
â€¢ æœåŠ¡å™¨è¿é€šæ€§ï¼šâœ“ å“åº”é€Ÿåº¦ä¼˜ç§€
â€¢ æ•°æ®æ ¼å¼éªŒè¯ï¼šâœ“ å®Œæ•´æ­£ç¡®æ— è¯¯
â€¢ è´¦æˆ·æƒé™çŠ¶æ€ï¼šâœ“ å…·å¤‡å®Œæ•´è®¿é—®æƒé™
â€¢ æµ‹è¯•æ ·æœ¬æ•°æ®ï¼šâœ“ ç™½ç¾Šåº§ä»Šæ—¥è¿åŠ¿è·å–æˆåŠŸ

ğŸ“Š è¿”å›æ•°æ®é¢„è§ˆå±•ç¤ºï¼š
â€¢ è¿åŠ¿æ¦‚è¿°ï¼š${result.result.summary.substring(0, 40)}...
â€¢ çˆ±æƒ…è¿åŠ¿ï¼š${result.result.love}æ˜Ÿè¯„çº§ â­
â€¢ å·¥ä½œè¡¨ç°ï¼š${result.result.work}æ˜Ÿè¯„çº§ â­
â€¢ è´¢è¿çŠ¶å†µï¼š${result.result.money}æ˜Ÿè¯„çº§ â­
â€¢ å¥åº·æŒ‡æ•°ï¼š${result.result.health}æ˜Ÿè¯„çº§ â­
â€¢ å¹¸è¿é¢œè‰²ï¼š${result.result.color}
â€¢ å¹¸è¿æ•°å­—ï¼š${result.result.number}

ğŸŒŸ ç³»ç»Ÿé…ç½®å·²å®Œæˆï¼ç°åœ¨å¯ä»¥æ”¾å¿ƒä½¿ç”¨"è·å–ä¸“ä¸šè¿åŠ¿"åŠŸèƒ½ï¼
ğŸ’ æ‚¨å°†äº«å—åˆ°ä¸“ä¸šå æ˜Ÿå¸ˆçº§åˆ«çš„ç²¾å‡†è¿åŠ¿åˆ†ææœåŠ¡ï¼`, 'success');
                } else {
                    throw new Error(`APIæœåŠ¡å“åº”å¼‚å¸¸: ${result.reason} (çŠ¶æ€ç : ${result.error_code})`);
                }
                
            } catch (error) {
                console.error('APIè¿æ¥æµ‹è¯•å¤±è´¥:', error);
                let errorMessage = `âŒ APIè¿æ¥æµ‹è¯•æœªé€šè¿‡

ğŸ” è¯¦ç»†é”™è¯¯ä¿¡æ¯ï¼š${error.message}`;

                if (error.message.includes('NetworkError') || error.message.includes('fetch') || error.message.includes('CORS')) {
                    errorMessage += `

ğŸŒ ç½‘ç»œè¿æ¥é—®é¢˜è¯Šæ–­ï¼š
â€¢ å½“å‰ç½‘ç»œè¿æ¥å¯èƒ½ä¸ç¨³å®šï¼Œè¯·æ£€æŸ¥ç½‘ç»œçŠ¶æ€
â€¢ æµè§ˆå™¨å®‰å…¨ç­–ç•¥å¯èƒ½é˜»æ­¢äº†è·¨åŸŸè¯·æ±‚
â€¢ é˜²ç«å¢™æˆ–å®‰å…¨è½¯ä»¶å¯èƒ½æ‹¦æˆªäº†APIè¯·æ±‚
â€¢ ä»£ç†æœåŠ¡å™¨è®¾ç½®å¯èƒ½å½±å“äº†æ­£å¸¸è®¿é—®

ğŸ’¡ æŠ€æœ¯è§£å†³æ–¹æ¡ˆï¼š
â€¢ å°è¯•åˆ·æ–°é¡µé¢åé‡æ–°æµ‹è¯•è¿æ¥
â€¢ æ£€æŸ¥æµè§ˆå™¨æ˜¯å¦é˜»æ­¢äº†ä¸å®‰å…¨çš„è¯·æ±‚
â€¢ å°†åº”ç”¨éƒ¨ç½²åˆ°HTTPSæœåŠ¡å™¨ç¯å¢ƒ
â€¢ è”ç³»ç½‘ç»œç®¡ç†å‘˜æ£€æŸ¥é˜²ç«å¢™é…ç½®
â€¢ å°è¯•æ›´æ¢ç½‘ç»œç¯å¢ƒè¿›è¡Œæµ‹è¯•`;
                } else if (error.message.includes('key') || error.message.includes('å¯†é’¥') || error.message.includes('401') || error.message.includes('403')) {
                    errorMessage += `

ğŸ”‘ APIå¯†é’¥ç›¸å…³é—®é¢˜ï¼š
â€¢ è¯·ç¡®è®¤å¯†é’¥å¤åˆ¶å®Œæ•´ï¼Œæ²¡æœ‰å¤šä½™çš„ç©ºæ ¼æˆ–å­—ç¬¦
â€¢ æ£€æŸ¥èšåˆæ•°æ®è´¦æˆ·ä¸­APIç”³è¯·çŠ¶æ€æ˜¯å¦æ­£å¸¸
â€¢ éªŒè¯è´¦æˆ·æ˜¯å¦å®Œæˆå®åè®¤è¯ï¼ˆèšåˆæ•°æ®è¦æ±‚ï¼‰
â€¢ ç¡®è®¤APIæœåŠ¡å½“å‰çŠ¶æ€æ˜¯å¦å¯ç”¨
â€¢ æ£€æŸ¥è´¦æˆ·å‰©ä½™è°ƒç”¨æ¬¡æ•°æ˜¯å¦å……è¶³

ğŸ› ï¸ è§£å†³å»ºè®®ï¼š
â€¢ ç™»å½•èšåˆæ•°æ®å®˜ç½‘é‡æ–°å¤åˆ¶å¯†é’¥
â€¢ æ£€æŸ¥APIç”³è¯·çŠ¶æ€å’Œä½¿ç”¨æƒé™
â€¢ è”ç³»èšåˆæ•°æ®å®˜æ–¹æŠ€æœ¯æ”¯æŒ`;
                }

                errorMessage += `

ğŸ­ ä¸´æ—¶è§£å†³æ–¹æ¡ˆï¼š
â€¢ ç‚¹å‡»"æ¼”ç¤ºä½“éªŒ"åŠŸèƒ½ç»§ç»­ä½“éªŒå®Œæ•´ç•Œé¢
â€¢ éƒ¨ç½²åˆ°GitHub Pagesåå¯èƒ½è‡ªåŠ¨è§£å†³ç½‘ç»œé™åˆ¶
â€¢ æˆ–ç¨ååœ¨æ›´ç¨³å®šçš„ç½‘ç»œç¯å¢ƒä¸‹é‡è¯•

ğŸ“ å¦‚éœ€æŠ€æœ¯æ”¯æŒï¼Œè¯·è”ç³»èšåˆæ•°æ®å®˜æ–¹å®¢æœ`;

                showStatus(errorMessage, 'error', false);
            } finally {
                setLoading(false);
            }
        }

        // é”®ç›˜å¿«æ·é”®æ”¯æŒ - å¢å¼ºç‰ˆ
        function setupKeyboardShortcuts() {
            document.addEventListener('keydown', function(e) {
                // é¿å…åœ¨è¾“å…¥æ§ä»¶ä¸­è§¦å‘å¿«æ·é”®
                if (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA' || e.target.tagName === 'SELECT') {
                    return;
                }

                if (e.ctrlKey || e.metaKey) {
                    switch(e.key.toLowerCase()) {
                        case 'enter':
                            e.preventDefault();
                            fetchHoroscopeData();
                            showStatus('âš¡ å¿«æ·é”®è§¦å‘ï¼šè·å–ä¸“ä¸šè¿åŠ¿', 'info', false);
                            setTimeout(hideStatus, 2000);
                            break;
                        case 't':
                            e.preventDefault();
                            testApiConnection();
                            showStatus('âš¡ å¿«æ·é”®è§¦å‘ï¼šæµ‹è¯•APIè¿æ¥', 'info', false);
                            setTimeout(hideStatus, 2000);
                            break;
                        case 'd':
                            e.preventDefault();
                            runDemoMode();
                            showStatus('âš¡ å¿«æ·é”®è§¦å‘ï¼šå¯åŠ¨æ¼”ç¤ºä½“éªŒ', 'info', false);
                            setTimeout(hideStatus, 2000);
                            break;
                        case 'delete':
                        case 'backspace':
                            e.preventDefault();
                            clearResults();
                            break;
                    }
                }
            });

            // è¾“å‡ºå¿«æ·é”®ä¿¡æ¯åˆ°æ§åˆ¶å°
            console.log(`
ğŸš€ ç”Ÿå‘½æ–¹ç¨‹å¼ - å¿«æ·é”®æŒ‡å—ï¼š
âš¡ Ctrl + Enter: è·å–ä¸“ä¸šè¿åŠ¿æ•°æ®
âš¡ Ctrl + T: æµ‹è¯•APIè¿æ¥çŠ¶æ€  
âš¡ Ctrl + D: å¯åŠ¨æ¼”ç¤ºä½“éªŒæ¨¡å¼
âš¡ Ctrl + Delete: æ¸…é™¤æ‰€æœ‰æ•°æ®
            `);
        }

        // é¡µé¢åˆå§‹åŒ– - å®Œæ•´ç‰ˆ
        function initializePage() {
            console.log('ğŸš€ ç”Ÿå‘½æ–¹ç¨‹å¼ä¸“ä¸šç‰ˆæ­£åœ¨å¯åŠ¨åˆå§‹åŒ–...');
            
            // è®¾ç½®å½“å‰æ—¥æœŸå’Œæ—¶é—´
            const today = new Date();
            const dateStr = today.toLocaleDateString('zh-CN', {
                year: 'numeric',
                month: 'long',
                day: 'numeric',
                weekday: 'long'
            });
            
            const dateEl = safeGetElement('dateSubtitle');
            if (dateEl) {
                dateEl.textContent = `${dateStr} | æ™ºèƒ½è¿åŠ¿åˆ†æç³»ç»Ÿ`;
            }
            
            // ç»‘å®šæ‰€æœ‰äº‹ä»¶ç›‘å¬å™¨
            const eventBindings = [
                { id: 'fetchBtn', handler: fetchHoroscopeData, desc: 'è·å–ä¸“ä¸šè¿åŠ¿' },
                { id: 'testApiBtn', handler: testApiConnection, desc: 'æµ‹è¯•APIè¿æ¥' },
                { id: 'demoBtn', handler: runDemoMode, desc: 'æ¼”ç¤ºä½“éªŒæ¨¡å¼' },
                { id: 'clearBtn', handler: clearResults, desc: 'æ¸…é™¤æ•°æ®' }
            ];

            let bindingSuccess = 0;
            eventBindings.forEach(({ id, handler, desc }) => {
                const element = safeGetElement(id);
                if (element) {
                    element.addEventListener('click', handler);
                    console.log(`âœ… ${desc} äº‹ä»¶ç»‘å®šæˆåŠŸ`);
                    bindingSuccess++;
                } else {
                    console.warn(`âŒ ${desc} æŒ‰é’®æœªæ‰¾åˆ° (${id})`);
                }
            });

            // è®¾ç½®é”®ç›˜å¿«æ·é”®æ”¯æŒ
            setupKeyboardShortcuts();
            
            console.log(`âœ… ç”Ÿå‘½æ–¹ç¨‹å¼åˆå§‹åŒ–å®Œæˆ (${bindingSuccess}/${eventBindings.length} åŠŸèƒ½å·²æ¿€æ´»)`);
            
            // æ˜¾ç¤ºæ¬¢è¿å’Œä½¿ç”¨æŒ‡å—
            setTimeout(() => {
                showStatus(`ğŸ‰ æ¬¢è¿ä½¿ç”¨ç”Ÿå‘½æ–¹ç¨‹å¼ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç³»ç»Ÿï¼

âœ¨ ç³»ç»ŸåŠŸèƒ½ç‰¹è‰²ï¼š
â€¢ ğŸŒŸ èšåˆæ•°æ®å®˜æ–¹APIï¼Œç¡®ä¿æ•°æ®æƒå¨å‡†ç¡®
â€¢ ğŸ­ é«˜è´¨é‡æ¼”ç¤ºæ¨¡å¼ï¼Œå®Œæ•´ä½“éªŒæ‰€æœ‰åŠŸèƒ½
â€¢ ğŸ“Š å››ç»´ä¸“ä¸šè¯„åˆ†ï¼šçˆ±æƒ…ã€å·¥ä½œã€è´¢è¿ã€å¥åº·
â€¢ ğŸ€ å¹¸è¿å…ƒç´ åˆ†æï¼šé¢œè‰²ã€æ•°å­—ã€é…å¯¹æ˜Ÿåº§
â€¢ ğŸ“± å®Œç¾å“åº”å¼è®¾è®¡ï¼Œé€‚é…æ‰€æœ‰è®¾å¤‡å±å¹•
â€¢ âŒ¨ï¸ æ™ºèƒ½å¿«æ·é”®æ”¯æŒï¼Œæå‡æ“ä½œæ•ˆç‡

ğŸš€ å¿«æ·æ“ä½œæŒ‡å—ï¼š
â€¢ Ctrl + D: å¿«é€Ÿå¯åŠ¨æ¼”ç¤ºä½“éªŒ
â€¢ Ctrl + Enter: è·å–çœŸå®è¿åŠ¿æ•°æ®
â€¢ Ctrl + T: æµ‹è¯•APIè¿æ¥çŠ¶æ€
â€¢ Ctrl + Delete: æ¸…é™¤æ‰€æœ‰æ˜¾ç¤ºæ•°æ®

ğŸ¯ ä½¿ç”¨å»ºè®®ï¼š
1. é¦–æ¬¡ä½¿ç”¨å»ºè®®ç‚¹å‡»"æ¼”ç¤ºä½“éªŒ"äº†è§£åŠŸèƒ½
2. è·å–èšåˆæ•°æ®APIå¯†é’¥äº«å—çœŸå®è¿åŠ¿æœåŠ¡
3. æ”¯æŒå•ä¸ªæ˜Ÿåº§æŸ¥è¯¢æˆ–å…¨éƒ¨12æ˜Ÿåº§æ‰¹é‡è·å–
4. å¯é€‰æ‹©ä»Šæ—¥ã€æ˜æ—¥ã€æœ¬å‘¨ã€æœ¬æœˆå››ç§è¿åŠ¿ç±»å‹

ğŸŒŸ ç«‹å³å¼€å§‹æ‚¨çš„ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿åˆ†æä¹‹æ—…ï¼`, 'info');
            }, 1500);
        }

        // é¡µé¢ç”Ÿå‘½å‘¨æœŸç®¡ç†
        document.addEventListener('DOMContentLoaded', function() {
            console.log('ğŸ“„ DOMå†…å®¹åŠ è½½å®Œæˆï¼Œå¼€å§‹åˆå§‹åŒ–åº”ç”¨');
            initializePage();
        });

        window.addEventListener('load', function() {
            console.log('ğŸŒ é¡µé¢æ‰€æœ‰èµ„æºåŠ è½½å®Œæˆ');
            // ç¡®ä¿é¡µé¢å®Œå…¨åŠ è½½åçš„è¡¥å……æ£€æŸ¥
            if (!document.querySelector('.status:not(.hidden)')) {
                console.log('ğŸ”„ æ‰§è¡Œå¤‡ç”¨åˆå§‹åŒ–æµç¨‹');
                initializePage();
            }
        });

        // å…¨å±€é”™è¯¯å¤„ç†
        window.addEventListener('error', function(e) {
            console.error('ğŸš¨ é¡µé¢è¿è¡Œé”™è¯¯:', e.error);
            showStatus(`âš ï¸ ç³»ç»Ÿæ£€æµ‹åˆ°è¿è¡Œå¼‚å¸¸

é”™è¯¯ä¿¡æ¯ï¼š${e.error?.message || 'æœªçŸ¥é”™è¯¯'}
å‘ç”Ÿä½ç½®ï¼š${e.filename || 'æœªçŸ¥æ–‡ä»¶'} ç¬¬${e.lineno || '?'}è¡Œ

ğŸ’¡ è§£å†³å»ºè®®ï¼š
â€¢ å°è¯•åˆ·æ–°é¡µé¢é‡æ–°åŠ è½½ç³»ç»Ÿ
â€¢ æ£€æŸ¥æµè§ˆå™¨å…¼å®¹æ€§ï¼ˆå»ºè®®ä½¿ç”¨Chromeã€Firefoxã€Safariï¼‰
â€¢ å¦‚é—®é¢˜æŒç»­å­˜åœ¨ï¼Œè¯·æŸ¥çœ‹æµè§ˆå™¨å¼€å‘è€…å·¥å…·æ§åˆ¶å°
â€¢ æˆ–å°è¯•æ¸…é™¤æµè§ˆå™¨ç¼“å­˜åé‡æ–°è®¿é—®

ğŸ­ ä¸´æ—¶æ–¹æ¡ˆï¼šæ¼”ç¤ºä½“éªŒåŠŸèƒ½é€šå¸¸ä¸å—å½±å“`, 'error');
        });

        // é¡µé¢å¯è§æ€§å˜åŒ–å¤„ç†
        document.addEventListener('visibilitychange', function() {
            if (document.visibilityState === 'visible') {
                if (isLoading) {
                    showStatus('ğŸ”„ é¡µé¢é‡æ–°æ¿€æ´»ï¼Œè¯·æ£€æŸ¥å½“å‰æ“ä½œè¿›åº¦', 'info');
                }
                console.log('ğŸ‘€ é¡µé¢é‡æ–°è·å¾—ç„¦ç‚¹');
            } else {
                console.log('ğŸŒ™ é¡µé¢å¤±å»ç„¦ç‚¹ï¼Œè¿›å…¥åå°è¿è¡Œ');
            }
        });

        // ç½‘ç»œçŠ¶æ€ç›‘å¬
        window.addEventListener('online', function() {
            console.log('ğŸŒ ç½‘ç»œè¿æ¥å·²æ¢å¤');
            showStatus('ğŸŒ ç½‘ç»œè¿æ¥å·²æ¢å¤ï¼ŒAPIåŠŸèƒ½ç°å·²å¯ç”¨', 'success');
        });

        window.addEventListener('offline', function() {
            console.log('ğŸ“¡ ç½‘ç»œè¿æ¥å·²æ–­å¼€');
            showStatus('ğŸ“¡ æ£€æµ‹åˆ°ç½‘ç»œè¿æ¥ä¸­æ–­ï¼ŒAPIåŠŸèƒ½æš‚æ—¶ä¸å¯ç”¨\næ¼”ç¤ºä½“éªŒåŠŸèƒ½ä»å¯æ­£å¸¸ä½¿ç”¨', 'error');
        });

        // æ§åˆ¶å°æ¬¢è¿ä¿¡æ¯
        console.log(`
ğŸŒŸ ================================================================
    ç”Ÿå‘½æ–¹ç¨‹å¼ - ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨
    ç‰ˆæœ¬ï¼šGitHub Pages ç”Ÿäº§ç‰ˆ
    æŠ€æœ¯æ ˆï¼šHTML5 + CSS3 + åŸç”ŸJavaScript
    æ•°æ®æ¥æºï¼šèšåˆæ•°æ®å®˜æ–¹API
    å¼€å‘å›¢é˜Ÿï¼šç”Ÿå‘½æ–¹ç¨‹å¼å¼€å‘ç»„
ğŸŒŸ ================================================================

ğŸ“Š ç³»ç»ŸçŠ¶æ€ï¼š
â€¢ è¿è¡Œç¯å¢ƒï¼š${window.location.origin}
â€¢ ç”¨æˆ·ä»£ç†ï¼š${navigator.userAgent.split(' ').slice(-2).join(' ')}
â€¢ å±å¹•åˆ†è¾¨ç‡ï¼š${screen.width} Ã— ${screen.height}
â€¢ å½“å‰æ—¶é—´ï¼š${new Date().toLocaleString()}

ğŸ› ï¸ å¼€å‘è€…é€‰é¡¹ï¼š
â€¢ æ‰“å¼€æ§åˆ¶å°æŸ¥çœ‹è¯¦ç»†è¿è¡Œæ—¥å¿—
â€¢ ä½¿ç”¨ Network é¢æ¿ç›‘æ§APIè¯·æ±‚
â€¢ æ”¯æŒç§»åŠ¨è®¾å¤‡æ¨¡æ‹Ÿæµ‹è¯•å“åº”å¼è®¾è®¡

ğŸ¯ å¿«é€Ÿæµ‹è¯•ï¼š
â€¢ åœ¨æ§åˆ¶å°æ‰§è¡Œ runDemoMode() å¯åŠ¨æ¼”ç¤ºæ¨¡å¼
â€¢ æ‰§è¡Œ clearResults() æ¸…é™¤æ•°æ®
â€¢ æ‰§è¡Œ showStatus('æµ‹è¯•æ¶ˆæ¯', 'info') æµ‹è¯•çŠ¶æ€æ˜¾ç¤º
        `);

        console.log('ğŸŒŸ ç”Ÿå‘½æ–¹ç¨‹å¼ä¸“ä¸šç‰ˆå·²å®Œå…¨åŠ è½½å°±ç»ªï¼');
    </script>
</body>
</html><!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="ç”Ÿå‘½æ–¹ç¨‹å¼ - ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨ï¼ŒåŸºäºèšåˆæ•°æ®APIçš„æ™ºèƒ½æ˜Ÿåº§è¿åŠ¿åˆ†æç³»ç»Ÿ">
    <meta name="keywords" content="æ˜Ÿåº§,è¿åŠ¿,å åœ,ç”Ÿå‘½æ–¹ç¨‹å¼,æ˜Ÿåº§è¿åŠ¿,æ¯æ—¥è¿åŠ¿,èšåˆæ•°æ®">
    <meta name="author" content="ç”Ÿå‘½æ–¹ç¨‹å¼å›¢é˜Ÿ">
    <meta name="robots" content="index, follow">
    <title>ç”Ÿå‘½æ–¹ç¨‹å¼ - ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='0.9em' font-size='90'>ğŸŒŸ</text></svg>">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Microsoft YaHei', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background: linear-gradient(135deg, #0d1f0d 0%, #1a3d1a 30%, #2d5a2d 70%, #1a3d1a 100%);
            min-height: 100vh;
            color: #E8F5E8;
            overflow-x: hidden;
            line-height: 1.6;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
        }

        .main-title {
            font-size: 3.2rem;
            color: #E8F5E8;
            margin-bottom: 15px;
            text-shadow: 0 0 20px rgba(144, 238, 144, 0.5);
            animation: titleGlow 3s ease-in-out infinite alternate;
            font-weight: 700;
            letter-spacing: 2px;
        }

        @keyframes titleGlow {
            0% { text-shadow: 0 0 20px rgba(144, 238, 144, 0.5), 0 0 40px rgba(144, 238, 144, 0.2); }
            100% { text-shadow: 0 0 35px rgba(144, 238, 144, 0.8), 0 0 70px rgba(144, 238, 144, 0.4); }
        }

        .subtitle {
            font-size: 1.4rem;
            color: #90EE90;
            margin-bottom: 15px;
            font-weight: 300;
        }

        .version-info {
            font-size: 1rem;
            color: #98FB98;
            opacity: 0.9;
            margin-bottom: 35px;
            font-weight: 500;
        }

        .feature-badges {
            display: flex;
            justify-content: center;
            gap: 12px;
            margin-bottom: 35px;
            flex-wrap: wrap;
        }

        .badge {
            background: rgba(144, 238, 144, 0.2);
            color: #90EE90;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.9rem;
            border: 1px solid rgba(144, 238, 144, 0.3);
            transition: all 0.3s ease;
        }

        .badge:hover {
            background: rgba(144, 238, 144, 0.3);
            transform: translateY(-2px);
        }

        .welcome-banner {
            background: rgba(144, 238, 144, 0.1);
            border: 2px solid rgba(144, 238, 144, 0.3);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            margin-bottom: 30px;
            animation: welcomeGlow 4s ease-in-out infinite alternate;
        }

        @keyframes welcomeGlow {
            0% { box-shadow: 0 0 15px rgba(144, 238, 144, 0.2); }
            100% { box-shadow: 0 0 25px rgba(144, 238, 144, 0.4); }
        }

        .api-config {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 25px;
            margin-bottom: 35px;
            border: 2px solid rgba(144, 238, 144, 0.2);
            backdrop-filter: blur(15px);
            transition: all 0.3s ease;
        }

        .api-config:hover {
            border-color: rgba(144, 238, 144, 0.4);
            box-shadow: 0 8px 30px rgba(144, 238, 144, 0.15);
            transform: translateY(-2px);
        }

        .config-title {
            color: #90EE90;
            margin-bottom: 25px;
            font-size: 1.5rem;
            text-align: center;
            font-weight: 600;
        }

        .config-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
        }

        .config-item {
            margin-bottom: 15px;
        }

        .config-item label {
            display: block;
            margin-bottom: 10px;
            color: #ADFF2F;
            font-weight: 600;
            font-size: 1rem;
        }

        .config-item input, .config-item select {
            width: 100%;
            padding: 14px 18px;
            border: 2px solid rgba(144, 238, 144, 0.3);
            border-radius: 12px;
            background: rgba(255, 255, 255, 0.1);
            color: #E8F5E8;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        .config-item input:focus, .config-item select:focus {
            outline: none;
            border-color: #90EE90;
            box-shadow: 0 0 20px rgba(144, 238, 144, 0.3);
            background: rgba(255, 255, 255, 0.15);
        }

        .config-item input::placeholder {
            color: rgba(232, 245, 232, 0.7);
        }

        .controls {
            display: flex;
            justify-content: center;
            gap: 25px;
            margin-bottom: 45px;
            flex-wrap: wrap;
        }

        .btn {
            background: linear-gradient(45deg, #2d5a2d, #4a7c59);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 30px;
            font-size: 1.1rem;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3);
            position: relative;
            overflow: hidden;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .btn::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
            transition: left 0.5s;
        }

        .btn:hover::before {
            left: 100%;
        }

        .btn:hover {
            transform: translateY(-4px);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.4);
            background: linear-gradient(45deg, #4a7c59, #5d9f6e);
        }

        .btn.primary {
            background: linear-gradient(45deg, #228B22, #32CD32);
            font-size: 1.4rem;
            padding: 22px 45px;
            animation: pulseGreen 2.5s ease-in-out infinite;
        }

        @keyframes pulseGreen {
            0%, 100% { box-shadow: 0 6px 20px rgba(0, 0, 0, 0.3); }
            50% { box-shadow: 0 6px 30px rgba(50, 205, 50, 0.5), 0 0 25px rgba(50, 205, 50, 0.3); }
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .btn:disabled:hover {
            transform: none;
        }

        .status {
            text-align: center;
            margin: 25px 0;
            padding: 30px;
            border-radius: 25px;
            font-weight: 500;
            white-space: pre-line;
            backdrop-filter: blur(20px);
            border: 2px solid transparent;
            transition: all 0.3s ease;
            line-height: 1.8;
            font-size: 1rem;
        }

        .status.loading {
            background: rgba(255, 193, 7, 0.15);
            color: #FFC107;
            border-color: rgba(255, 193, 7, 0.5);
            animation: loadingPulse 1.5s ease-in-out infinite;
        }

        @keyframes loadingPulse {
            0%, 100% { transform: scale(1); opacity: 0.8; }
            50% { transform: scale(1.03); opacity: 1; }
        }

        .status.success {
            background: rgba(40, 167, 69, 0.15);
            color: #28A745;
            border-color: rgba(40, 167, 69, 0.5);
            animation: successGlow 0.6s ease-out;
        }

        @keyframes successGlow {
            0% { transform: scale(0.95); opacity: 0; }
            100% { transform: scale(1); opacity: 1; }
        }

        .status.error {
            background: rgba(220, 53, 69, 0.15);
            color: #DC3545;
            border-color: rgba(220, 53, 69, 0.5);
            animation: errorShake 0.6s ease-out;
        }

        @keyframes errorShake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-8px); }
            75% { transform: translateX(8px); }
        }

        .status.info {
            background: rgba(23, 162, 184, 0.15);
            color: #17A2B8;
            border-color: rgba(23, 162, 184, 0.5);
        }

        .horoscope-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(380px, 1fr));
            gap: 30px;
            margin-top: 35px;
        }

        .horoscope-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(144, 238, 144, 0.2);
            border-radius: 25px;
            padding: 30px;
            transition: all 0.3s ease;
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .horoscope-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #228B22, #32CD32, #90EE90, #32CD32, #228B22);
            transform: translateX(-100%);
            transition: transform 0.4s ease;
        }

        .horoscope-card:hover::before {
            transform: translateX(0);
        }

        .horoscope-card:hover {
            border-color: rgba(144, 238, 144, 0.5);
            box-shadow: 0 15px 40px rgba(144, 238, 144, 0.2);
            transform: translateY(-8px);
        }

        .card-title {
            font-size: 1.8rem;
            color: #90EE90;
            margin-bottom: 25px;
            text-align: center;
            font-weight: 700;
            text-shadow: 0 2px 10px rgba(144, 238, 144, 0.3);
        }

        .card-content {
            line-height: 1.8;
        }

        .card-content h4 {
            color: #ADFF2F;
            margin: 18px 0 10px 0;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
            gap: 10px;
            font-weight: 600;
        }

        .star-rating {
            color: #FFD700;
            font-size: 1.3rem;
            margin-left: 8px;
            text-shadow: 0 0 10px rgba(255, 215, 0, 0.5);
        }

        .lucky-info {
            background: rgba(144, 238, 144, 0.1);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border-left: 5px solid #90EE90;
            transition: all 0.3s ease;
        }

        .lucky-info:hover {
            background: rgba(144, 238, 144, 0.15);
            transform: translateX(5px);
        }

        .color-preview {
            display: inline-block;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            margin: 0 10px;
            vertical-align: middle;
            border: 3px solid rgba(255, 255, 255, 0.3);
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3);
        }

        .hidden {
            display: none;
        }

        .api-info {
            background: rgba(23, 162, 184, 0.15);
            padding: 25px;
            border-radius: 20px;
            border: 2px solid rgba(23, 162, 184, 0.3);
            margin-bottom: 30px;
            color: #17A2B8;
            line-height: 1.6;
        }

        .api-info h3 {
            margin-bottom: 15px;
            color: #17A2B8;
            font-size: 1.3rem;
        }

        .api-links {
            text-align: center;
            margin: 35px 0;
            padding: 25px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .api-links a {
            color: #90EE90;
            text-decoration: none;
            font-weight: 600;
            transition: all 0.3s ease;
            font-size: 1rem;
        }

        .api-links a:hover {
            color: #ADFF2F;
            text-shadow: 0 0 15px rgba(173, 255, 47, 0.5);
        }

        .footer {
            text-align: center;
            margin-top: 70px;
            padding: 50px 25px;
            border-top: 3px solid rgba(144, 238, 144, 0.2);
            color: #98FB98;
        }

        .footer p {
            margin: 12px 0;
            font-size: 1rem;
        }

        .footer .copyright {
            font-size: 0.95rem;
            opacity: 0.8;
            margin-top: 25px;
        }

        .loading-spinner {
            display: inline-block;
            width: 22px;
            height: 22px;
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-radius: 50%;
            border-top: 3px solid #90EE90;
            animation: spin 1s linear infinite;
            margin-right: 12px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* å“åº”å¼è®¾è®¡ä¼˜åŒ– */
        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            
            .main-title {
                font-size: 2.5rem;
                letter-spacing: 1px;
            }
            
            .controls {
                flex-direction: column;
                align-items: center;
            }
            
            .btn {
                width: 100%;
                max-width: 320px;
                margin: 10px 0;
            }
            
            .horoscope-grid {
                grid-template-columns: 1fr;
            }
            
            .config-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .feature-badges {
                justify-content: center;
                gap: 8px;
            }

            .badge {
                font-size: 0.8rem;
                padding: 6px 12px;
            }
        }

        @media (max-width: 480px) {
            .main-title {
                font-size: 2rem;
            }
            
            .api-config {
                padding: 20px;
            }
            
            .horoscope-card {
                padding: 20px;
            }

            .controls {
                gap: 15px;
            }

            .btn {
                padding: 16px 30px;
                font-size: 1rem;
            }

            .btn.primary {
                padding: 20px 35px;
                font-size: 1.2rem;
            }
        }

        /* é«˜åˆ†è¾¨ç‡å±å¹•ä¼˜åŒ– */
        @media (min-width: 1400px) {
            .container {
                max-width: 1400px;
            }
            
            .main-title {
                font-size: 3.8rem;
            }
            
            .horoscope-grid {
                grid-template-columns: repeat(auto-fit, minmax(420px, 1fr));
            }
        }

        /* æ‰“å°æ ·å¼ */
        @media print {
            body {
                background: white !important;
                color: black !important;
            }
            
            .controls, .api-config, .welcome-banner {
                display: none !important;
            }
            
            .horoscope-card {
                border: 2px solid #ccc !important;
                box-shadow: none !important;
                margin-bottom: 20px;
            }
            
            .main-title {
                color: #333 !important;
                text-shadow: none !important;
            }
        }

        /* æ— éšœç¢è®¿é—®ä¼˜åŒ– */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header class="header">
            <h1 class="main-title">ğŸŒŸ ç”Ÿå‘½æ–¹ç¨‹å¼</h1>
            <p class="subtitle" id="dateSubtitle">ä¸“ä¸šæ˜Ÿåº§è¿åŠ¿ç”Ÿæˆå™¨</p>
            <p class="version-info">æ™ºèƒ½ç®—æ³• Ã— èšåˆæ•°æ®API Ã— GitHub Pages</p>
            
            <div class="feature-badges">
                <span class="badge">ğŸ”® AIæ™ºèƒ½ç®—æ³•</span>
                <span class="badge">ğŸ“Š å››ç»´è¯„åˆ†ç³»ç»Ÿ</span>
                <span class="badge">ğŸŒˆ å¹¸è¿è‰²å½©åˆ†æ</span>
                <span class="badge">â­ å®æ—¶æ•°æ®æ›´æ–°</span>
                <span class="badge">ğŸ“± å“åº”å¼è®¾è®¡</span>
                <span class="badge">ğŸ¯ ç²¾å‡†åŒ¹é…</span>
            </div>
        </header>

        <div class="welcome-banner">
            <h2 style="color: #90EE90; margin-bottom: 10px;">ğŸ‰ æ¬¢è¿ä½¿ç”¨ç”Ÿå‘½æ–¹ç¨‹å¼ï¼</h2>
            <p style="color: #98FB98; font-size: 1.1rem;">åŸºäºä¸“ä¸šå æ˜Ÿå­¦ç®—æ³•ï¼Œä¸ºæ‚¨æä¾›æœ€å‡†ç¡®çš„æ˜Ÿåº§è¿åŠ¿åˆ†æ</p>
        </div>

        <div class="api-info">
            <h3>ğŸ“¡ æ•°æ®æ¥æºè¯´æ˜</h3>
            <p>æœ¬åº”ç”¨é›†æˆèšåˆæ•°æ®å®˜æ–¹æ˜Ÿåº§è¿åŠ¿APIï¼Œæä¾›çœŸå®ã€å‡†ç¡®ã€åŠæ—¶çš„æ˜Ÿåº§è¿åŠ¿æ•°æ®ã€‚æ”¯æŒä»Šæ—¥ã€æ˜æ—¥ã€æœ¬å‘¨ã€æœ¬æœˆå››ç§è¿åŠ¿ç±»å‹ï¼ŒåŒ…å«çˆ±æƒ…ã€å·¥ä½œã€è´¢è¿ã€å¥åº·å››ä¸ªç»´åº¦çš„ä¸“ä¸šè¯„åˆ†ç³»ç»Ÿï¼Œä»¥åŠå¹¸è¿é¢œè‰²ã€å¹¸è¿æ•°å­—ã€é€Ÿé…æ˜Ÿåº§ç­‰å®Œæ•´è¿åŠ¿å…ƒç´ ã€‚</p>
        </div>

        <div class="api-config">
            <h3 class="config-title">ğŸ”‘ æ™ºèƒ½é…ç½®ä¸­å¿ƒ</h3>
            
            <div class="config-grid">
                <div class="config-item">
                    <label for="apiKey">ğŸ” èšåˆæ•°æ®APIå¯†é’¥:</label>
                    <input type="password" id="apiKey" placeholder="è¯·è¾“å…¥æ‚¨çš„API Keyï¼Œè·å–çœŸå®è¿åŠ¿æ•°æ®" />
                </div>

                <div class="config-item">
                    <label for="consType">ğŸ“… è¿åŠ¿æŸ¥è¯¢ç±»å‹:</label>
                    <select id="consType">
                        <option value="today">ä»Šæ—¥è¿åŠ¿ - æŠŠæ¡å½“ä¸‹</option>
                        <option value="tomorrow">æ˜æ—¥è¿åŠ¿ - é¢„çŸ¥æœªæ¥</option>
                        <option value="week">æœ¬å‘¨è¿åŠ¿ - è§„åˆ’ä¸€å‘¨</option>
                        <option value="month">æœ¬æœˆè¿åŠ¿ - æœˆåº¦æŒ‡å—</option>
                    </select>
                </div>

                <div class="config-item">
                    <label for="targetConstellation">ğŸ¯ æ˜Ÿåº§é€‰æ‹©:</label>
                    <select id="targetConstellation">
                        <option value="">è·å–å…¨éƒ¨12æ˜Ÿåº§è¿åŠ¿</option>
                        <option value="aries">â™ˆ ç™½ç¾Šåº§ (3.21-4.19) - ç«è±¡æ˜Ÿåº§</option>
                        <option value="taurus">â™‰ é‡‘ç‰›åº§ (4.20-5.20) - åœŸè±¡æ˜Ÿåº§</option>
                        <option value="gemini">â™Š åŒå­åº§ (5.21-6.21) - é£è±¡æ˜Ÿåº§</option>
                        <option value="cancer">â™‹ å·¨èŸ¹åº§ (6.22-7.22) - æ°´è±¡æ˜Ÿåº§</option>
                        <option value="leo">â™Œ ç‹®å­åº§ (7.23-8.22) - ç«è±¡æ˜Ÿåº§</option>
                        <option value="virgo">â™ å¤„å¥³åº§ (8.23-9.22) - åœŸè±¡æ˜Ÿåº§</option>
                        <option value="libra">â™ å¤©ç§¤åº§ (9.23-10.23) - é£è±¡æ˜Ÿåº§</option>
                        <option value="scorpio">â™ å¤©èåº§ (10.24-11.22) - æ°´è±¡æ˜Ÿåº§</option>
                        <option value="sagittarius">â™ å°„æ‰‹åº§ (11.23-12.21) - ç«è±¡æ˜Ÿåº§</option>
                        <option value="capricorn">â™‘ æ‘©ç¾¯åº§ (12.22-1.19) - åœŸè±¡æ˜Ÿåº§</option>
                        <option value="aquarius">â™’ æ°´ç“¶åº§ (1.20-2.18) - é£è±¡æ˜Ÿåº§</option>
                        <option value="pisces">â™“ åŒé±¼åº§ (2.19-3.20) - æ°´è±¡æ˜Ÿåº§</option>
                    </select>
                </div>
            </div>
        </div>

        <div class="controls">
            <button class="btn primary" id="fetchBtn">
                ğŸŒŸ è·å–ä¸“ä¸šè¿åŠ¿
            </button>
            <button class="btn" id="testApiBtn">
                ğŸ”§ æµ‹è¯•APIè¿æ¥
            </button>
            <button class="btn" id="demoBtn">
                ğŸ­ æ¼”ç¤ºä½“éªŒ
            </button>
            <button class="btn" id="clearBtn">
                ğŸ—‘ï¸ æ¸…é™¤æ•°æ®
            </button>
        </div>

        <div id="statusMessage" class="status hidden"></div>

        <div id="horoscopeResults" class="horoscope-grid hidden"></div>

        <div class="api-links">
            <p><strong>ğŸ“š APIå®˜æ–¹æ–‡æ¡£:</strong> <a href="https://www.juhe.cn/docs/api/id/58" target="_blank" rel="noopener">èšåˆæ•°æ®æ˜Ÿåº§è¿åŠ¿APIæ¥å£</a></p>
            <p><strong>ğŸ”‘ è·å–APIå¯†é’¥:</strong> <a href="https://www.juhe.cn/" target="_blank" rel="noopener">èšåˆæ•°æ®å®˜ç½‘å…è´¹æ³¨å†Œ</a></p>
            <p><strong>ğŸ’¡ å¿«é€Ÿä¸Šæ‰‹:</strong> æ³¨å†Œè´¦å· â†’ ç”³è¯·æ˜Ÿåº§API â†’ è·å–å¯†é’¥ â†’ é…ç½®ä½¿ç”¨ â†’ äº«å—ç²¾å‡†è¿åŠ¿</p>
        </div>

        <footer class="footer">
            <p><strong>ğŸ‰ ç”Ÿå‘½æ–¹ç¨‹å¼ - è®©æ˜Ÿåº§è¿åŠ¿æ›´åŠ ç§‘å­¦ç²¾å‡†</strong></p>
            <p>âœ¨ åŸºäºèšåˆæ•°æ®APIçš„ä¸“ä¸šæ˜Ÿåº§åˆ†æç³»ç»Ÿ</p>
            <p>ğŸŒŸ å››ç»´è¯„åˆ†ç³»ç»Ÿ | å¹¸è¿å…ƒç´ åˆ†æ | å¤šç±»å‹æŸ¥è¯¢ | æ™ºèƒ½åŒ¹é…ç®—æ³•</p>
            <p>ğŸ“± å®Œç¾é€‚é…å…¨ç«¯è®¾å¤‡ | GitHub Pagesé«˜é€Ÿç¨³å®šæ‰˜ç®¡</p>
            <div class="copyright">
                <p>&copy; 2024 ç”Ÿå‘½æ–¹ç¨‹å¼å¼€å‘å›¢é˜Ÿ | ä»…ä¾›å¨±ä¹å‚è€ƒï¼Œè¯·å‹¿è¿‡åº¦ä¾èµ–</p>
                <p>å¼€æºé¡¹ç›®æ‰˜ç®¡äº <a href="https://github.com" target="_blank" rel="noopener" style="color: #90EE90;">GitHub</a> | æ„Ÿè°¢ <a href="https://www.juhe.cn/" target="_blank" rel="noopener" style="color: #90EE90;">èšåˆæ•°æ®</a> æä¾›APIæ”¯æŒ</p>
            </div>
        </footer>
    </div>

    <script>
        // å·¥å…·å‡½æ•° - å®‰å…¨è·å–DOMå…ƒç´ 
        function safeGetElement(id) {
            const element = document.getElementById(id);
            if (!element) {
                console.warn(`DOMå…ƒç´ æœªæ‰¾åˆ°: ${id}`);
            }
            return element;
        }

        // æ˜Ÿåº§æ˜ å°„é…ç½® - å®Œæ•´ç‰ˆ
        const constellationMap = {
            'aries': { name: 'ç™½ç¾Šåº§', symbol: 'â™ˆ', period: '3.21-4.19', element: 'ç«è±¡' },
            'taurus': { name: 'é‡‘ç‰›åº§', symbol: 'â™‰', period: '4.20-5.20', element: 'åœŸè±¡' },
            'gemini': { name: 'åŒå­åº§', symbol: 'â™Š', period: '5.21-6.21', element: 'é£è±¡' },
            'cancer': { name: 'å·¨èŸ¹åº§', symbol: 'â™‹', period: '6.22-7.22', element: 'æ°´è±¡' },
            'leo': { name: 'ç‹®å­åº§', symbol: 'â™Œ', period: '7.23-8.22', element: 'ç«è±¡' },
            'virgo': { name: 'å¤„å¥³åº§', symbol: 'â™', period: '8.23-9.22', element: 'åœŸè±¡' },
            'libra': { name: 'å¤©ç§¤åº§', symbol: 'â™', period: '9.23-10.23', element: 'é£è±¡' },
            'scorpio': { name: 'å¤©èåº§', symbol: 'â™', period: '10.24-11.22', element: 'æ°´è±¡' },
            'sagittarius': { name: 'å°„æ‰‹åº§', symbol: 'â™', period: '11.23-12.21', element: 'ç«è±¡' },
            'capricorn': { name: 'æ‘©ç¾¯åº§', symbol: 'â™‘', period: '12.22-1.19', element: 'åœŸè±¡' },
            'aquarius': { name: 'æ°´ç“¶åº§', symbol: 'â™’', period: '1.20-2.18', element: 'é£è±¡' },
            'pisces': { name: 'åŒé±¼åº§', symbol: 'â™“', period: '2.19-3.20', element: 'æ°´è±¡' }
        };

        // å…¨å±€çŠ¶æ€ç®¡ç†
        let isLoading = false;
        let currentData = null;

        // çŠ¶æ€ç®¡ç†å‡½æ•°
        function showStatus(message, type = 'info', autoHide = true) {
            const statusEl = safeGetElement('statusMessage');
            if (statusEl) {
                statusEl.className = `status ${type}`;
                statusEl.textContent = message;
                statusEl.classList.remove('hidden');
                
                if (autoHide) {
                    const hideTime = type === 'error' ? 10000 : (